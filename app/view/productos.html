
<ons-page ng-controller="ProductosCtrl">
  <ons-toolbar>
    <div class="left">
      <ons-back-button>Atras</ons-back-button>
    </div>
    <div class="center">{{categoryName}}</div>
    <div class="right">
      <ons-toolbar-button ng-click="Navigator.pushPage('app/view/busqueda.html')">
        <ons-icon icon="ion-android-search"></ons-icon>
      </ons-toolbar-button>
      <ons-toolbar-button ng-click="menu.setMainPage('app/view/carrito.html')">
        <ons-icon icon="ion-ios-cart-outline" ng-class="{'active-cart': cartCount &gt; 0}" data="{{cartCount}}"></ons-icon>
      </ons-toolbar-button>
    </div>
  </ons-toolbar>
  <ons-row style="background-image: url( app/img/header_{{ rSpace(categoryName) }}.jpg )" class="selectionMode"> 
    <ons-col>&nbsp;</ons-col>
    <ons-col>
      <div class="button-bar">
        <div class="button-bar__item">
          <input type="radio" name="vista" ng-checked="!grid" ng-click="grid=false"/>
          <button class="button-bar__button">
            <ons-icon icon="fa-list-ul"></ons-icon>
          </button>
        </div>
        <div class="button-bar__item">
          <input type="radio" name="vista" ng-checked="grid" ng-click="grid=true"/>
          <button class="button-bar__button">
            <ons-icon icon="fa-th-large"></ons-icon>
          </button>
        </div>
      </div>
    </ons-col>
  </ons-row>
  <ons-row ng-show="!grid" class="productsList">
    <ons-col>
      <ons-list>
        <ons-list-item ng-repeat="prod in products | orderBy:'name'" class="product">
          <ons-row>
            <ons-col width="70px">
              <div class="thumb"><img ng-src="http://dbo.space/jagergin/cms/api/imageFiles/{{prod.refId}}.jpg" alt=""/></div>
            </ons-col>
            <ons-col>
              <div class="name">{{prod.name}}</div>
              <div class="description">{{prod.description}}</div>
              <div class="price">{{prod.new_price | currency}}</div>
            </ons-col>
            <ons-col width="70px" ng-hide="InCart(prod.refId)" class="cartBtn">
              <ons-button ng-click="addToCart(prod)">
                <ons-icon icon="ion-ios-cart-outline"></ons-icon>
              </ons-button>
            </ons-col>
            <ons-col width="70px" ng-show="InCart(prod.refId)" class="cartBtn">
              <ons-button class="isInCart">
                <ons-icon icon="ion-ios-checkmark-empty"></ons-icon>
              </ons-button>
            </ons-col>
          </ons-row>
        </ons-list-item>
      </ons-list>
    </ons-col>
  </ons-row>
  <ons-row ng-show="grid" class="productsGrid">
    <ons-col ng-repeat="prod in products | orderBy:'name'" width="46%" class="product">
      <ons-row>
        <div class="bigthumb"><img ng-src="http://dbo.space/jagergin/cms/api/imageFiles/{{prod.refId}}.jpg" alt=""/></div>
        <div class="name">{{prod.name}}</div>
        <ons-row>
          <ons-col>
            <div class="description">{{prod.description}}</div>
          </ons-col>
          <ons-col class="tar"><span class="qtyTxt">{{prod.quantity}}x  </span><span class="price">{{prod.new_price | currency}}</span></ons-col>
        </ons-row>
        <ons-row>
          <ons-col ng-hide="InCart(prod.refId)">
            <ons-icon icon="ion-android-remove" ng-show="prod.quantity&gt;1" ng-click="prod.quantity = (prod.quantity*1)-1" ng-class="{'eliminate' : cartItems[$index].quantity == 1}" class="qtyButtons"></ons-icon>
            <ons-icon icon="ion-android-add" ng-click="prod.quantity = (prod.quantity*1)+1" class="qtyButtons"></ons-icon>
          </ons-col>
          <ons-col>
            <div ng-hide="InCart(prod.refId)" class="cartBtn">
              <ons-button ng-click="addToCart(prod)">
                <ons-icon icon="ion-ios-cart-outline"></ons-icon>
              </ons-button>
            </div>
            <div ng-show="InCart(prod.refId)" class="cartBtn">
              <ons-button class="isInCart">
                <ons-icon icon="ion-ios-checkmark-empty"></ons-icon>
              </ons-button>
            </div>
          </ons-col>
        </ons-row>
      </ons-row>
    </ons-col>
  </ons-row>
</ons-page>